{"version":3,"file":"main.js","sources":["../../src/ts/main.ts"],"sourcesContent":["import { createApp } from \"petite-vue\"\nimport { isInput, vibrate } from \"@/ts/functions\"\nimport { SearchModal, SearchResult } from \"@/ts/search\"\nimport { Post } from \"@/ts/post\"\n\ndeclare global {\n  interface Window {\n    Turbo: object\n    keyDownListener: EventListener\n    toggleSearchModal: Function\n    vibrate: (pattern: number | number[]) => boolean\n    idx: lunr.Index\n    index: Record<string, Post>\n    siteUrl: String\n  }\n}\n\ninterface SideMenuComponent {\n  activeSearchModal: boolean\n}\n\nfunction modalKeyHandler(evt: KeyboardEvent): void {\n  if (!document.getElementById(\"search-modal\")) return\n\n  if (!isInput((<HTMLElement>evt.target).nodeName)) {\n    if (evt.key === \"/\") {\n      evt.preventDefault()\n      return window?.toggleSearchModal(true)\n    }\n  }\n\n  if (evt.key === \"Escape\" || evt.key === \"Esc\") {\n    evt.preventDefault()\n    return window?.toggleSearchModal(false)\n  }\n}\n\nfunction Menu() {\n  return {\n    activeMenuItem: window.location.href,\n    itemIsActive(el: HTMLAnchorElement) {\n      return this.activeMenuItem === el.href\n    },\n  }\n}\n\nconst mountApp = () => {\n  function toggleSearchModal(this: SideMenuComponent, force?: boolean): void {\n    if (force != undefined) this.activeSearchModal = force\n    else this.activeSearchModal = !this.activeSearchModal\n  }\n\n  return createApp({\n    Menu,\n    SearchModal,\n    SearchResult,\n    activeSearchModal: false,\n    searchInput: null,\n    mountSearchModal() {\n      window.toggleSearchModal = toggleSearchModal.bind(this)\n      document.addEventListener(\"keydown\", modalKeyHandler)\n    },\n  }).mount(\"#side-menu-container\")\n}\n\nwindow.vibrate = vibrate\n\ndocument.addEventListener(\"DOMContentLoaded\", mountApp)\n"],"names":["createApp"],"mappings":";;;AAqBA,SAAS,eAAe,CAAC,GAAkB,EAAA;AACzC,IAAA,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAC;QAAE,OAAM;IAEpD,IAAI,CAAC,OAAO,CAAe,GAAG,CAAC,MAAO,CAAC,QAAQ,CAAC,EAAE;AAChD,QAAA,IAAI,GAAG,CAAC,GAAG,KAAK,GAAG,EAAE;YACnB,GAAG,CAAC,cAAc,EAAE,CAAA;AACpB,YAAA,OAAO,MAAM,EAAE,iBAAiB,CAAC,IAAI,CAAC,CAAA;AACvC,SAAA;AACF,KAAA;IAED,IAAI,GAAG,CAAC,GAAG,KAAK,QAAQ,IAAI,GAAG,CAAC,GAAG,KAAK,KAAK,EAAE;QAC7C,GAAG,CAAC,cAAc,EAAE,CAAA;AACpB,QAAA,OAAO,MAAM,EAAE,iBAAiB,CAAC,KAAK,CAAC,CAAA;AACxC,KAAA;AACH,CAAC;AAED,SAAS,IAAI,GAAA;IACX,OAAO;AACL,QAAA,cAAc,EAAE,MAAM,CAAC,QAAQ,CAAC,IAAI;AACpC,QAAA,YAAY,CAAC,EAAqB,EAAA;AAChC,YAAA,OAAO,IAAI,CAAC,cAAc,KAAK,EAAE,CAAC,IAAI,CAAA;SACvC;KACF,CAAA;AACH,CAAC;AAED,MAAM,QAAQ,GAAG,MAAK;IACpB,SAAS,iBAAiB,CAA0B,KAAe,EAAA;QACjE,IAAI,KAAK,IAAI,SAAS;AAAE,YAAA,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAA;;AACjD,YAAA,IAAI,CAAC,iBAAiB,GAAG,CAAC,IAAI,CAAC,iBAAiB,CAAA;KACtD;AAED,IAAA,OAAOA,EAAS,CAAC;QACf,IAAI;QACJ,WAAW;QACX,YAAY;AACZ,QAAA,iBAAiB,EAAE,KAAK;AACxB,QAAA,WAAW,EAAE,IAAI;QACjB,gBAAgB,GAAA;YACd,MAAM,CAAC,iBAAiB,GAAG,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;AACvD,YAAA,QAAQ,CAAC,gBAAgB,CAAC,SAAS,EAAE,eAAe,CAAC,CAAA;SACtD;AACF,KAAA,CAAC,CAAC,KAAK,CAAC,sBAAsB,CAAC,CAAA;AAClC,CAAC,CAAA;AAED,MAAM,CAAC,OAAO,GAAG,OAAO,CAAA;AAExB,QAAQ,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,QAAQ,CAAC"}